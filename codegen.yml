# codegen.yml
emitLegacyCommonJSImports: false

generates:
  ./src/graphql/raywhite/schema.graphql:
    schema:
      - ./src/resolvers/**/*.graphql
    plugins:
      - schema-ast
  ./src/graphql/raywhite/index.ts:
    schema:
      - ./src/resolvers/**/*.graphql
    config:
      contextType: ./resolvers/context.js#Context
      makeResolverTypeCallable: true
      mappers:
        User: ./resolvers/User/model.js#UserModel
        Anime: ./resolvers/Anime/model.js#AnimeModel
        AnilistAnime: ./resolvers/AnilistAnime/model.js#AnilistAnimeModel
    plugins:
      - typescript
      - typescript-resolvers
      - "./codegen-plugins/typedefs.mjs"

  ./src/graphql/anilist/:
    schema:
      - https://graphql.anilist.co
    documents:
      - ./src/**/*.anilist.gql
    preset: client

  ./src/graphql/annict/:
    schema:
      - "https://api.annict.com/graphql":
          headers:
            Authorization: "Bearer ${ANNICT_TOKEN}"
    documents:
      - ./src/**/*.annict.gql
    preset: client
