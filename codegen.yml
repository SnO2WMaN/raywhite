# codegen.yml
generates:
  ./src/schema.graphql:
    schema:
      - ./src/resolvers/**/*.graphql
    plugins:
      - schema-ast
  ./src/graphql.ts:
    schema:
      - ./src/resolvers/**/*.graphql
    config:
      contextType: ./context.js#Context
      makeResolverTypeCallable: true
      mappers:
        User: ./resolvers/User/model.js#UserModel
        Anime: ./resolvers/Anime/model.js#AnimeModel
        AnilistAnime: ./resolvers/AnilistAnime/model.js#AnilistAnimeModel
    plugins:
      - typescript
      - typescript-resolvers
      - "./codegen-plugins/typedefs.mjs"

  ./src/anilist.ts:
    schema:
      - https://graphql.anilist.co
    documents:
      - ./src/**/*.anilist.gql
    plugins:
      - typescript
      - typescript-operations
      - typescript-graphql-request

  ./src/annict.ts:
    schema:
      - "https://api.annict.com/graphql":
          headers:
            Authorization: "Bearer ${ANNICT_TOKEN}"
    documents:
      - ./src/**/*.annict.gql
    plugins:
      - typescript
      - typescript-operations
      - typescript-graphql-request
